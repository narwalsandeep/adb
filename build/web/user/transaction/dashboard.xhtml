<ui:composition template="/master/user-layout.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:define name="content">
		
		<div class="alert alert-info"> Total Amount in your account is : <strong>#{transactionBean.getCurrentAmount(loginBean.loggedInUser.id)} #{loginBean.loggedInUser.currency}</strong> </div>
		<hr/>
		<p>
			<h4>
				 Money Sent
			</h4>
		</p>
		
		<div class="panel panel-default">
		<div class="panel-heading"><small class="text text-primary"> Money You have sent to other users.</small>
</div>
		<h:dataTable value="#{transactionBean.findAllSentTransactionsByUser()}" var="tx"
					  styleClass="table table-bordered table-condensed table-hover table-responsive">
			 <h:column>
				 <f:facet name="header">Receiver Name </f:facet>
					 #{userBean.findOneById(tx.receiverId).getName()}
			 </h:column>
			 <h:column>
				 <f:facet name="header">Receiver Email </f:facet>
					 #{userBean.findOneById(tx.receiverId).getEmail()}
			 </h:column>
			 <h:column>
				 <f:facet name="header">Amount  #{loginBean.loggedInUser.currency}</f:facet>
					 #{tx.amount}
			 </h:column>
			 <h:column>
				 <f:facet name="header">Dated</f:facet>
					 #{tx.dated}
			 </h:column>
			
		 </h:dataTable>
		 </div>

		<hr/>
		<p>
			<h4>
				Money Received 
			</h4>
		</p>
		<div class="panel panel-default">
		<div class="panel-heading" ><small class="text text-danger"> It also include your requests. AWAITING APPROVAL will not be added to your Total Balance. It will be added only after its APPROVED.</small>
</div>
		<h:dataTable value="#{transactionBean.findAllRequestTransactionsByUser()}" var="tx"
					  styleClass="table table-bordered table-condensed table-hover table-responsive">
			 <h:column>
				 <f:facet name="header">Sender Name </f:facet>
					 #{userBean.findOneById(tx.senderId).getName()}
			 </h:column>
			 <h:column>
				 <f:facet name="header">sender Email </f:facet>
					 #{userBean.findOneById(tx.senderId).getEmail()}
			 </h:column>
			 <h:column>
				 <f:facet name="header">Amount  #{loginBean.loggedInUser.currency}</f:facet>
					 #{tx.amount}
			 </h:column>
			
			 <h:column>
				 <f:facet name="header">status</f:facet>
					 #{tx.status}
			 </h:column>
			 <h:column>
				 <f:facet name="header">Dated</f:facet>
					 #{tx.dated}
			 </h:column>
			
		 </h:dataTable>
		 </div>


    </ui:define>
</ui:composition>
